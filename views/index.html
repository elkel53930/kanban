<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban Board</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <h1>Kanban Board</h1>
        
        <!-- Notification Area -->
        <div id="notification-area"></div>
        
        <div class="toolbar">
            <button id="add-card-btn" class="btn btn-primary">
                ‚ûï „Ç´„Éº„Éâ„ÇíËøΩÂä†
            </button>
            <button id="history-btn" class="btn btn-secondary">
                üìã Â±•Ê≠¥
            </button>
        </div>
        
        <div class="board">
            <div class="column" id="todo">
                <h2>Todo</h2>
                <div class="cards"></div>
            </div>
            <div class="column" id="today">
                <h2>‰ªäÊó•„ÇÑ„Çã</h2>
                <div class="cards"></div>
            </div>
            <div class="column" id="in-progress">
                <h2>ÂÆüË°å‰∏≠</h2>
                <div class="cards"></div>
            </div>
            <div class="column" id="done">
                <h2>ÂÆå‰∫Ü</h2>
                <div class="cards"></div>
            </div>
        </div>
    </div>

    <!-- Add Card Modal -->
    <div id="add-card-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Êñ∞„Åó„ÅÑ„Ç´„Éº„Éâ„ÇíËøΩÂä†</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="add-card-form">
                <div class="form-group">
                    <label for="card-title">„Çø„Ç§„Éà„É´ *</label>
                    <input type="text" id="card-title" name="title" required>
                </div>
                
                <div class="form-group">
                    <label for="card-description">Ë™¨Êòé</label>
                    <textarea id="card-description" name="description" rows="4" placeholder="Markdown„ÅßË®òËø∞„Åß„Åç„Åæ„Åô"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="card-column">„Ç´„É©„É†</label>
                    <select id="card-column" name="column_name">
                        <option value="todo">Todo</option>
                        <option value="today">‰ªäÊó•„ÇÑ„Çã</option>
                        <option value="in-progress">ÂÆüË°å‰∏≠</option>
                        <option value="done">ÂÆå‰∫Ü</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="card-due-date">ÊúüÈôê</label>
                    <input type="date" id="card-due-date" name="due_date">
                </div>
                
                <div class="form-group">
                    <label for="card-tags">„Çø„Ç∞</label>
                    <input type="text" id="card-tags" name="tags" placeholder="„Ç´„É≥„ÉûÂå∫Âàá„Çä„ÅßÂÖ•Âäõ (‰æã: ÈáçË¶Å, ÊÄ•„Åé)">
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-btn">„Ç≠„É£„É≥„Çª„É´</button>
                    <button type="submit" class="btn btn-primary">ËøΩÂä†</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Card Details Modal -->
    <div id="card-details-modal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3 id="details-title">„Ç´„Éº„ÉâË©≥Á¥∞</h3>
                <button class="modal-close" id="details-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="edit-title">„Çø„Ç§„Éà„É´ *</label>
                    <input type="text" id="edit-title" name="title" required>
                </div>
                
                <div class="form-group">
                    <label for="edit-description">Ë™¨Êòé</label>
                    <div class="description-container">
                        <div id="description-display" class="description-display">
                            <div id="description-rendered" class="markdown-content"></div>
                        </div>
                        <div id="description-edit" class="description-edit" style="display: none;">
                            <textarea id="edit-description" name="description" rows="6" placeholder="Markdown„ÅßË®òËø∞„Åß„Åç„Åæ„Åô"></textarea>
                        </div>
                        <div class="description-controls">
                            <button type="button" class="btn-link" id="edit-description-btn" onclick="toggleDescriptionEdit()">Á∑®ÈõÜ</button>
                            <button type="button" class="btn-link" id="cancel-description-btn" onclick="cancelDescriptionEdit()" style="display:none;">„Ç≠„É£„É≥„Çª„É´</button>
                            <button type="button" class="btn-link" id="save-description-btn" onclick="saveDescriptionEdit()" style="display:none;">‰øùÂ≠ò</button>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-column">„Ç´„É©„É†</label>
                        <select id="edit-column" name="column_name">
                            <option value="todo">Todo</option>
                            <option value="today">‰ªäÊó•„ÇÑ„Çã</option>
                            <option value="in-progress">ÂÆüË°å‰∏≠</option>
                            <option value="done">ÂÆå‰∫Ü</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-due-date">ÊúüÈôê</label>
                        <input type="date" id="edit-due-date" name="due_date">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="edit-tags">„Çø„Ç∞</label>
                    <input type="text" id="edit-tags" name="tags" placeholder="„Ç´„É≥„ÉûÂå∫Âàá„Çä„ÅßÂÖ•Âäõ (‰æã: ÈáçË¶Å, ÊÄ•„Åé)">
                </div>
                
                <div class="comments-section">
                    <h4>„Ç≥„É°„É≥„Éà</h4>
                    <div id="comments-list"></div>
                    <div class="add-comment">
                        <textarea id="new-comment" placeholder="Êñ∞„Åó„ÅÑ„Ç≥„É°„É≥„Éà„ÇíËøΩÂä†..." rows="5"></textarea>
                        <button type="button" class="btn btn-primary" id="add-comment-btn">„Ç≥„É°„É≥„ÉàËøΩÂä†</button>
                    </div>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-danger" id="delete-card-btn">ÂâäÈô§</button>
                <button type="button" class="btn btn-secondary" id="details-cancel-btn">„Ç≠„É£„É≥„Çª„É´</button>
                <button type="button" class="btn btn-primary" id="save-changes-btn">Â§âÊõ¥„Çí‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div id="history-modal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>üìã ÂÆå‰∫Ü„Ç´„Éº„ÉâÂ±•Ê≠¥</h3>
                <button class="modal-close" id="history-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="history-controls">
                    <label for="history-date">Êó•‰ªò„ÅßÁµû„ÇäËæº„Åø:</label>
                    <input type="date" id="history-date" />
                    <button class="btn btn-sm btn-secondary" id="clear-date-btn">ÂÖ®ÊúüÈñìË°®Á§∫</button>
                </div>
                
                <div id="history-content">
                    <div id="history-loading" class="loading" style="display: none;">
                        Ë™≠„ÅøËæº„Åø‰∏≠...
                    </div>
                    <div id="history-list"></div>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="history-cancel-btn">Èñâ„Åò„Çã</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>